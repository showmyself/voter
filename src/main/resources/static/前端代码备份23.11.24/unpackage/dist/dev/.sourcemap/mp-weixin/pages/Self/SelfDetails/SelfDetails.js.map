{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Projects/UniappProjects/voter/pages/Self/SelfDetails/SelfDetails.vue?7168","webpack:///D:/Projects/UniappProjects/voter/pages/Self/SelfDetails/SelfDetails.vue?a08e","webpack:///D:/Projects/UniappProjects/voter/pages/Self/SelfDetails/SelfDetails.vue?bbd0","webpack:///D:/Projects/UniappProjects/voter/pages/Self/SelfDetails/SelfDetails.vue?a000","uni-app:///pages/Self/SelfDetails/SelfDetails.vue","webpack:///D:/Projects/UniappProjects/voter/pages/Self/SelfDetails/SelfDetails.vue?5505","webpack:///D:/Projects/UniappProjects/voter/pages/Self/SelfDetails/SelfDetails.vue?9c72"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","user","id","iconSrc","username","age","sex","email","mark","createTime","userEdit","sexList","value","label","ageList","isEdit","isSelectSex","isSelectAge","isChangePwd","uploadUrl","oldPwd","newPwd","methods","getSex","confirmSex","getAge","confirmAge","beginEdit","cancelEdit","confirmEdit","refreshUser","beforeUpload","callback","onUploadSuccess","deleteLatestAvatar","toChangePwd","confirmChangePwd","oldPassword","newPassword","onReady","onUnload"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,oBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACsC;;;AAGhG;AACuM;AACvM,gBAAgB,+MAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5EA;AAAA;AAAA;AAAA;AAA+wB,CAAgB,+xBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC+GnyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AAAA,eAEA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAR;QACAC;QACAC;QACAC;QACAC;MACA;MACAK,UACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;MACA;MACA;MACA;MAEA;QACA;QACA;UACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;;MAEAC;IACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;MAEA;QACAC;QACAC;MACA;MAEA;QACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;MAAA3B;MAAAC;IAAA;IACA;MACA;QAAAD;QAAAC;MAAA;IACA;EACA;EACA2B;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;ACrRA;AAAA;AAAA;AAAA;AAA09C,CAAgB,86CAAG,EAAC,C;;;;;;;;;;;ACA9+C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/Self/SelfDetails/SelfDetails.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/Self/SelfDetails/SelfDetails.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./SelfDetails.vue?vue&type=template&id=4e6c6633&scoped=true&\"\nvar renderjs\nimport script from \"./SelfDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./SelfDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SelfDetails.vue?vue&type=style&index=0&id=4e6c6633&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e6c6633\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/Self/SelfDetails/SelfDetails.vue\"\nexport default component.exports","export * from \"-!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./SelfDetails.vue?vue&type=template&id=4e6c6633&scoped=true&\"","var components\ntry {\n  components = {\n    myNavBar: function () {\n      return import(\n        /* webpackChunkName: \"components/my-nav-bar/my-nav-bar\" */ \"@/components/my-nav-bar/my-nav-bar.vue\"\n      )\n    },\n    uAvatar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-avatar/u-avatar\" */ \"@/uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    myUploadImg: function () {\n      return import(\n        /* webpackChunkName: \"components/my-upload-img/my-upload-img\" */ \"@/components/my-upload-img/my-upload-img.vue\"\n      )\n    },\n    uSelect: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-select/u-select\" */ \"@/uview-ui/components/u-select/u-select.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-modal/u-modal\" */ \"@/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.getSex()\n  var m1 = _vm.getAge()\n  if (!_vm._isMounted) {\n    _vm.e0 = function () {\n      if (_vm.isEdit) {\n        _vm.isSelectSex = true\n      }\n    }\n    _vm.e1 = function () {\n      if (_vm.isEdit) {\n        _vm.isSelectAge = true\n      }\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./SelfDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./SelfDetails.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"my-page-root\">\r\n\t\t<my-nav-bar title=\"个人信息\"/>\r\n\t\t<view class=\"my-page-root-child form-page\">\r\n\r\n\t\t\t<view style=\"height: 20rpx;\"/>\r\n\r\n\t\t\t<view class=\"form-area\">\r\n\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<view style=\"display: inline-block;\">\r\n\t\t\t\t\t\t<u-avatar :src=\"isEdit?userEdit.iconSrc:user.iconSrc\"></u-avatar>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"isEdit\" style=\"display: inline-block;width: 70%; margin-left: 5%;\">\r\n\t\t\t\t\t\t<my-upload-img\r\n\t\t\t\t\t\t:url=\"uploadUrl\"\r\n\t\t\t\t\t\t:maxSize=\"0.5 * 1024 * 1024\"\r\n\t\t\t\t\t\t@beforeUpload=\"beforeUpload\"\r\n\t\t\t\t\t\t@onUploadSuccess=\"onUploadSuccess\">\r\n\t\t\t\t\t\t</my-upload-img>\r\n\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<text class=\"icon-link\">当前图片链接：</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<input id=\"iconSrc\" class=\"input-icon-src\" v-model=\"userEdit.iconSrc\" type=\"text\"/>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"lable\">用户名</text>\r\n\t\t\t\t\t<view style=\"display: inline-table;margin-left: 5%;width: 80%;\">\r\n\t\t\t\t\t\t<input class=\"input\" v-if=\"!isEdit\" v-model=\"user.username\" type=\"text\" :disabled=\"true\" :style=\"[{'background-color':'#eee'}]\"/>\r\n\t\t\t\t\t\t<input class=\"input\" v-if=\"isEdit\" v-model=\"userEdit.username\" type=\"text\" :style=\"[{'background-color':'#ddd'}]\"/>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"lable\">性别</text>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view style=\"display: inline-table;margin-left: 5%;\">\r\n\t\t\t\t\t\t<a class=\"select-btn\" :style=\"[{'text-decoration': isEdit?'underline':'none'}]\"\r\n\t\t\t\t\t\t\t@click=\"()=>{if(isEdit)isSelectSex = true}\">\r\n\t\t\t\t\t\t\t{{getSex()}}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-select v-model=\"isSelectSex\" :list=\"sexList\" @confirm=\"confirmSex\"></u-select>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<text class=\"lable\">年龄</text>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view style=\"display: inline-table;margin-left: 5%;\">\r\n\t\t\t\t\t\t<a class=\"select-btn\" :style=\"[{'text-decoration': isEdit?'underline':'none'}]\"\r\n\t\t\t\t\t\t\t@click=\"()=>{if(isEdit)isSelectAge = true}\">\r\n\t\t\t\t\t\t\t{{getAge()}}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<u-select v-model=\"isSelectAge\" :list=\"ageList\" @confirm=\"confirmAge\"></u-select>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<view style=\"margin-top: 10rpx;\">\r\n\t\t\t\t\t\t<text class=\"lable\">邮箱</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{user.email}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"margin-top: 10rpx;\">\r\n\t\t\t\t\t\t<text class=\"lable\">当前积分</text>\r\n\t\t\t\t\t\t<text class=\"value mark\">{{user.mark}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"margin-top: 10rpx;\">\r\n\t\t\t\t\t\t<text class=\"lable\">创建日期</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{user.createTime}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view style=\"height: 60rpx;\"/>\r\n\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<a v-if=\"!isEdit\" class=\"change-pwd-btn\" style=\"float:left\" @click=\"toChangePwd\">修改密码</a>\r\n\t\t\t\t\t<u-modal v-model=\"isChangePwd\" \r\n\t\t\t\t\t:title-style=\"{color: 'cornflowerblue'}\"\r\n\t\t\t\t\t@confirm=\"confirmChangePwd\"\r\n\t\t\t\t\t:show-cancel-button=\"true\">\r\n\t\t\t\t\t\t<view class=\"slot-content\">\r\n\t\t\t\t\t\t\t<text class=\"pwd-label\">当前密码</text>\r\n\t\t\t\t\t\t\t<input class=\"pwd-input\" type=\"password\" v-model=\"oldPwd\"/>\r\n\t\t\t\t\t\t\t<view style=\"margin-top: 30rpx;\"></view>\r\n\t\t\t\t\t\t\t<text class=\"pwd-label\">新密码</text>\r\n\t\t\t\t\t\t\t<input class=\"pwd-input\" type=\"password\" v-model=\"newPwd\"/>\r\n\t\t\t\t\t\t\t<view style=\"margin-top: 20rpx;\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</u-modal>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<button v-if=\"!isEdit\" class=\"confirm-button\" style=\"float:right\" @click=\"beginEdit\">修改资料</button>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<button v-if=\"isEdit\" class=\"confirm-button\" style=\"float:right\" @click=\"confirmEdit\">确认修改</button>\r\n\t\t\t\t\t<a v-if=\"isEdit\" class=\"canel-edit-link\" style=\"float:right;margin-right: 5%;margin-top: 15rpx;\" @click=\"cancelEdit\">取消修改</a>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\nimport common from \"@/pages/Self/_common.js\"\r\nconst validator = common.validator\r\n\nexport default {\n\tdata() {\n\t\treturn {\r\n\t\t\tuser:{\r\n\t\t\t\tid:\"\",\r\n\t\t\t\ticonSrc:\"\",\r\n\t\t\t\tusername:\"\",\r\n\t\t\t\tage:\"\",\r\n\t\t\t\tsex:\"\",\r\n\t\t\t\temail:\"\",\r\n\t\t\t\tmark:0,\r\n\t\t\t\tcreateTime:\"\"\r\n\t\t\t},\r\n\t\t\tuserEdit:{\r\n\t\t\t\tid:\"\",\r\n\t\t\t\ticonSrc:\"\",\r\n\t\t\t\tusername:\"\",\r\n\t\t\t\tage:\"\",\r\n\t\t\t\tsex:\"\",\r\n\t\t\t},\r\n\t\t\tsexList:[\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: '男',\r\n\t\t\t\t\tlabel: '男 '\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: '女',\r\n\t\t\t\t\tlabel: '女 '\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: '不透露',\r\n\t\t\t\t\tlabel: '不透露'\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tageList:[],\r\n\t\t\tisEdit:false,\r\n\t\t\tisSelectSex:false,\r\n\t\t\tisSelectAge:false,\r\n\t\t\tisChangePwd:false,\r\n\t\t\tuploadUrl:\"\",\r\n\t\t\toldPwd:\"\",\r\n\t\t\tnewPwd:\"\"\n\t\t};\n\t},\n\tmethods: {\r\n\t\tgetSex(){\r\n\t\t\tconst sex = this.isEdit?this.userEdit.sex:this.user.sex\r\n\t\t\treturn sex?sex:\"不透露\"\r\n\t\t},\r\n\t\tconfirmSex(option){\r\n\t\t\tthis.userEdit.sex=option[0].value\r\n\t\t},\r\n\t\tgetAge(){\r\n\t\t\tconst age = this.isEdit?this.userEdit.age:this.user.age\r\n\t\t\tif(!age||age<=0)return \"不透露\"\r\n\t\t\treturn age\r\n\t\t},\r\n\t\tconfirmAge(option){\r\n\t\t\tthis.userEdit.age=option[0].value\r\n\t\t},\r\n\t\tbeginEdit(){\r\n\t\t\tfor(const key in this.userEdit){\r\n\t\t\t\tthis.userEdit[key]=this.user[key]\r\n\t\t\t}\r\n\t\t\tthis.isEdit=true\r\n\t\t},\r\n\t\tcancelEdit(){\r\n\t\t\tthis.isEdit=false\r\n\t\t\tthis.deleteLatestAvatar()\r\n\t\t},\r\n\t\tconfirmEdit(){\r\n\t\t\tif(this.userEdit.username.length<3){\r\n\t\t\t\tthis.util.toast(\"用户名 长度至少为3\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(this.userEdit.username.length>20){\r\n\t\t\t\tthis.util.toast(\"用户名 长度过长\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!this.userEdit.age)this.userEdit.age=0\r\n\t\t\tif(!this.userEdit.sex)this.userEdit.sex=\"\"\r\n\t\t\tif(!this.userEdit.iconSrc)this.userEdit.iconSrc=\"\"\r\n\r\n\t\t\tthis.api.user.changeSelfInfo(this.userEdit,()=>{\r\n\t\t\t\tthis.util.toast(\"修改成功\")\r\n\t\t\t\tfor(const key in this.userEdit){\r\n\t\t\t\t\tthis.user[key]=this.userEdit[key]\r\n\t\t\t\t}\r\n\t\t\t\tthis.vuex.set(\"user\",this.user)\r\n\t\t\t\tthis.isEdit=false\r\n\t\t\t})\r\n\t\t},\r\n\t\trefreshUser(){\r\n\t\t\tconst user = this.vuex.get(\"user\")\r\n\t\t\tfor(const key in this.user){\r\n\t\t\t\tthis.user[key]=user[key]\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//上传之前\r\n\t\tbeforeUpload(data,callback){\r\n\t\t\t//本来打算在此处判定文件后缀名的，但发现uview1.x的上传组件貌似仅支持图片，所以此处不再判定\r\n\t\t\t\r\n\t\t\tcallback(true)//用来赋值返回值，详细网搜vue $emit返回值\r\n\t\t},\r\n\t\t//上传完成时\r\n\t\tonUploadSuccess(resultData){\r\n\t\t\tthis.deleteLatestAvatar()\r\n\t\t\tthis.userEdit.iconSrc = resultData.url\r\n\t\t},\r\n\t\tdeleteLatestAvatar(){\r\n\t\t\t//如果不一致则请求删除\r\n\t\t\tif(this.user.iconSrc!=this.userEdit.iconSrc&&this.userEdit.iconSrc){\r\n\t\t\t\tconst names = this.userEdit.iconSrc.split('/')\r\n\t\t\t\tthis.api.user.deleteAvatar(names[names.length-1])\r\n\t\t\t\tthis.userEdit.iconSrc=null\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoChangePwd(){\r\n\t\t\tthis.isChangePwd=true\r\n\t\t},\r\n\t\tconfirmChangePwd(){\r\n\t\t\tif(this.oldPwd.length<4){\r\n\t\t\t\tthis.util.toast(\"当前密码 长度至少为3\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(this.oldPwd.length>36){\r\n\t\t\t\tthis.util.toast(\"当前密码 长度过长\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(this.newPwd.length<4){\r\n\t\t\t\tthis.util.toast(\"新密码 长度至少为3\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(this.newPwd.length>36){\r\n\t\t\t\tthis.util.toast(\"新密码 长度过长\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst dto={\r\n\t\t\t\toldPassword:this.oldPwd,\r\n\t\t\t\tnewPassword:this.newPwd\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.api.user.changePassword(dto,(data)=>{\r\n\t\t\t\tthis.util.toast(\"修改成功！\")\r\n\t\t\t\tthis.isChangePwd=false\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tonReady(){\r\n\t\tthis.refreshUser()\r\n\t\tthis.isEdit=false\r\n\t\tthis.uploadUrl = this.api.user.getUploadAvatarUrl()\r\n\t\tthis.ageList=[{value:-1,label:\"不透露\"}]\r\n\t\tfor(let i = 5;i<=110;++i){\r\n\t\t\tthis.ageList.push({value:i,label:i.toString()})\r\n\t\t}\r\n\t},\r\n\tonUnload() {\r\n\t\t//路由返回会导致页面的卸载\r\n\t\tthis.deleteLatestAvatar()\r\n\t},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\r\n@import \"@/common/my-class.scss\";\r\n@import \"@/pages/Self/_common.scss\";\r\n\r\n.upload-btn{\r\n\tcolor:steelblue;\r\n\tfont-size: 90%;\r\n}\r\n.icon-link{\r\n\tfont-size: 50%;\r\n\tfont-weight: 600;\r\n\tcolor:#999;\r\n}\r\n.input-icon-src{\r\n\tborder-radius: 0rpx;\r\n\tcolor:skyblue;\r\n\theight: 15rpx;\r\n\ttext-decoration: underline;\r\n}\r\n.select-btn{\r\n\tfont-size: 70%;\r\n\tcolor:dimgray;\r\n\tfont-weight: 600;\r\n\tborder-width: 0px;\r\n}\r\n.value{\r\n\tmargin-left: 5%;\r\n\tfont-size: 60%;\r\n\tfont-weight: 400;\r\n}\r\n.canel-edit-link{\r\n\tfont-size: 70%;\r\n\tcolor:#888;\r\n\tfont-weight: 600;\r\n}\r\n.change-pwd-btn{\r\n\tfont-size: 70%;\r\n\tcolor:#aaa;\r\n\tfont-weight: 500;\r\n\ttext-decoration: underline;\r\n}\r\n.pwd-label{\r\n\tfont-size: 60%;\r\n\tmargin-left: 10%;\r\n\tfont-weight: 600;\r\n\tborder-radius: 20%\r\n}\r\n.pwd-input{\r\n\t@extend .my-at-center-horizontal-block;\r\n\twidth: 80%;\r\n\theight: 35rpx;\r\n\tbackground-color: lightgray;\r\n\tborder-radius: 10rpx;\r\n}\n</style>\n","import mod from \"-!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./SelfDetails.vue?vue&type=style&index=0&id=4e6c6633&lang=scss&scoped=true&\"; export default mod; export * from \"-!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Softwares\\\\HBuilderX.full.3.3.11\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./SelfDetails.vue?vue&type=style&index=0&id=4e6c6633&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1694782285349\n      var cssReload = require(\"E:/Softwares/HBuilderX.full.3.3.11/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}